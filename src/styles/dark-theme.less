// ============================================
// 全局暗黑主题样式 - 只在 body.dark-mode 时应用
// ============================================

// 主题颜色变量
@dark-bg-primary: #0a0e27;
@dark-bg-secondary: #1a1f3a;
@dark-bg-tertiary: #0f1729;
@dark-border-color: rgba(96, 165, 250, 0.2);
@dark-border-hover: rgba(96, 165, 250, 0.4);
@dark-text-primary: #e0e6ed;
@dark-text-secondary: #8b92a7;
@dark-text-placeholder: #6b7280;
@dark-accent-blue: #60a5fa;
@dark-shadow-sm: 0 8px 32px rgba(0, 0, 0, 0.4);
@dark-shadow-lg: 0 12px 48px rgba(0, 0, 0, 0.6);
@dark-glow-blue: 0 0 20px rgba(96, 165, 250, 0.1);

body.dark-mode {
  // CSS 变量覆盖
  --td-bg-color-page: @dark-bg-primary;
  --td-bg-color-container: rgba(26, 31, 58, 0.9);
  --td-bg-color-container-hover: rgba(96, 165, 250, 0.1);
  --td-component-border: @dark-border-color;
  --td-text-color-primary: @dark-text-primary;
  --td-text-color-secondary: @dark-text-secondary;
  --td-text-color-placeholder: @dark-text-placeholder;
  --td-brand-color: @dark-accent-blue;

  background: @dark-bg-primary !important;
  color: @dark-text-primary !important;

  // 主容器
  #app,
  #app-container {
    background: @dark-bg-primary !important;
    color: @dark-text-primary !important;
  }

  // ============================================
  // 布局组件
  // ============================================
  .t-layout {
    background: @dark-bg-primary !important;
  }

  .t-layout__sider {
    background: linear-gradient(180deg, @dark-bg-secondary 0%, @dark-bg-tertiary 100%) !important;
    border-right: 1px solid @dark-border-color !important;
  }

  .t-layout__header {
    background: rgba(26, 31, 58, 0.95) !important;
    border-bottom: 1px solid @dark-border-color !important;
    backdrop-filter: blur(10px);
  }

  .t-layout__content {
    background: @dark-bg-primary !important;
  }

  // ============================================
  // 卡片
  // ============================================
  .t-card {
    background: linear-gradient(135deg, @dark-bg-secondary 0%, @dark-bg-tertiary 100%) !important;
    border: 1px solid @dark-border-color !important;
    box-shadow: @dark-shadow-sm, @dark-glow-blue !important;

    &:hover {
      border-color: @dark-border-hover !important;
    }

    .t-card__header {
      background: rgba(26, 31, 58, 0.6) !important;
      border-bottom: 1px solid @dark-border-color !important;
    }

    .t-card__body {
      background: rgba(15, 23, 41, 0.6) !important;
    }
  }

  // ============================================
  // 表格
  // ============================================
  .t-table,
  .t-table-container {
    background: transparent !important;
    border: 1px solid @dark-border-color !important;

    .t-table__header th {
      background: rgba(26, 31, 58, 0.8) !important;
      color: @dark-text-primary !important;
      border-color: @dark-border-color !important;
    }

    .t-table__body tr {
      background: rgba(15, 23, 41, 0.4) !important;

      &:hover {
        background: rgba(96, 165, 250, 0.1) !important;
      }

      td {
        color: @dark-text-primary !important;
        border-color: @dark-border-color !important;
      }
    }
  }

  // ============================================
  // 表单控件
  // ============================================
  .t-input,
  .t-textarea,
  .t-select .t-input,
  .t-date-picker .t-input {
    background: rgba(26, 31, 58, 0.9) !important;
    border-color: @dark-border-color !important;

    &:hover {
      border-color: @dark-border-hover !important;
    }

    &:focus,
    &.t-is-focused {
      border-color: @dark-accent-blue !important;
      box-shadow: 0 0 0 2px rgba(96, 165, 250, 0.2) !important;
    }

    input,
    textarea,
    .t-input__inner {
      background: transparent !important;
      color: @dark-text-primary !important;

      &::placeholder {
        color: @dark-text-placeholder !important;
      }
    }
  }

  .t-form__label,
  label {
    color: @dark-text-primary !important;
  }

  // ============================================
  // 按钮
  // ============================================
  .t-button--variant-base,
  .t-button--variant-outline {
    background: rgba(26, 31, 58, 0.9) !important;
    border-color: @dark-border-color !important;
    color: @dark-text-primary !important;

    &:hover {
      border-color: @dark-border-hover !important;
      background: rgba(96, 165, 250, 0.2) !important;
      color: @dark-accent-blue !important;
    }
  }

  .t-button--theme-primary {
    background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%) !important;
    border: none !important;
    box-shadow: 0 4px 12px rgba(96, 165, 250, 0.4) !important;
  }

  // ============================================
  // 下拉菜单
  // ============================================
  .t-select__dropdown,
  .t-dropdown__menu,
  .t-popup__content {
    background: rgba(26, 31, 58, 0.95) !important;
    border: 1px solid @dark-border-color !important;
    box-shadow: @dark-shadow-lg !important;
    backdrop-filter: blur(10px);

    .t-select-option,
    .t-dropdown__item {
      color: @dark-text-primary !important;

      &:hover {
        background: rgba(96, 165, 250, 0.2) !important;
        color: @dark-accent-blue !important;
      }

      &.t-is-selected {
        background: rgba(96, 165, 250, 0.3) !important;
        color: @dark-accent-blue !important;
      }
    }
  }

  // ============================================
  // 对话框和抽屉
  // ============================================
  .t-dialog,
  .t-drawer {
    background: linear-gradient(135deg, @dark-bg-secondary 0%, @dark-bg-tertiary 100%) !important;
    border: 1px solid @dark-border-color !important;
    box-shadow: @dark-shadow-lg !important;

    .t-dialog__header,
    .t-drawer__header {
      background: rgba(26, 31, 58, 0.9) !important;
      border-bottom: 1px solid @dark-border-color !important;
      color: @dark-text-primary !important;
    }

    .t-dialog__body,
    .t-drawer__body {
      background: rgba(15, 23, 41, 0.9) !important;
      color: @dark-text-primary !important;
    }

    .t-dialog__footer,
    .t-drawer__footer {
      background: rgba(26, 31, 58, 0.9) !important;
      border-top: 1px solid @dark-border-color !important;
    }

    * {
      color: @dark-text-primary !important;
    }
  }

  // ============================================
  // 菜单
  // ============================================
  .t-menu,
  .t-head-menu {
    background: transparent !important;

    .t-menu__item,
    .t-submenu__title {
      color: @dark-text-secondary !important;

      &:hover {
        background: rgba(96, 165, 250, 0.1) !important;
        color: @dark-accent-blue !important;
      }

      &.t-is-active {
        background: rgba(96, 165, 250, 0.2) !important;
        color: @dark-accent-blue !important;
      }
    }
  }

  // ============================================
  // 全局文字和边框
  // ============================================
  * {
    color: @dark-text-primary;
    border-color: @dark-border-color !important;
  }
}
